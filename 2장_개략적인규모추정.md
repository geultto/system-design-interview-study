# **개략적인 규모 추정(rough capacity estimation)이란?**

" 보편적으로 통용되는 성능 수치상에서 사고 실험을 행하여 추정치를 계산하는 행위로서, 어떤 설계가 요구사항에 부합할 것인지 보기 위한 것 “ - 시니어 펠로

- 어떤 시스템을 설계할 때 이미 업계에서 알려진 평균적인 성능 기준을 가정하여 **“얼마나 큰 규모의 자원(**CPU, 메모리, 네트워크 대역폭, 디스크 IOPS, DB 처리량 같은 것들**)이 필요할까?”** 를 대략적으로 가늠하는 작업(추정치 계산)

---

# 2의 제곱수

- 컴퓨터 시스템의 메모리, 스토리지, 파일 시스템 등은 **이진수(2진법)** 기반으로 동작
- 저장소, 메모리 계산은 **2의 거듭제곱 단위**로 정의
- **1바이트 = 8비트**가 기본 단위이고, 그 위로 **KB, MB, GB, TB …** 같은 데이터 볼륨 단위가 이어진다.
- 흔히 쓰이는 데이터 볼륨 단위

| 2의 X제곱 | 근사치 | 이름 | 축약형 |
| --- | --- | --- | --- |
| 10 | 1천 | 1킬로바이트 | 1KB |
| 20 | 1백만 | 1메가바이트 | 1MB |
| 30 | 10억 | 1기가바이트 | 1GB |
| 40 | 1조 | 1테라바이트 | 1TB |
| 50 | 1000조 | 1페타바이트 | 1PB |

# 모든 프로그래머가 알아야하는 응답 지연 값

- 메모리는 빠르지만 디스크는 아직도 느리다.
- 디스크 탐색은 가능한 피하라.
- 단순한 압축 알고리즘은 빠르다.
- 데이터를 인터넷으로 전송하기 전에 가능하면 압축하라.
- 데이터 센터는 보통 여러 지역에 분산되어 있고 센터들 간에 데이터를 주고받는 데는 시간이 걸린다.

# 가용성에 관계된 수치들

- 고가용성: 시스템이 오랜 시간 동안 지속적으로 중단 없이 운영될 수 있는 능력을 지칭하는 용어

→, SLA(서비스 가용성 목표)를 달성하기 위한 아키텍처 전략

- %로 표현
- 대부분의 서비스가 99%~100% 사이
- 9가 많으면 많을수록 좋은 서비스

![image.png](attachment:75006309-cf34-40e4-9b71-8f9400fbebc7:image.png)

# **예제: 트위터 QPS 와 저장소 요구량 추정**

### 가정

- 월간 능동 사용자(monthly active user)는 3억(300million) 명이다.
- 50%의 사용자가 트위터를 매일 사용한다.
- 평균적으로 각 사용자는 매일 2건의 트윗을 올린다.
- 미디어를 포함하는 트윗은 10% 정도다.
- 데이터는 5년간 보관된다.

### 추정

- QPS(Query Per Second) 추정치 *QPS : 초당 들어오는 요청(또는 처리해야 하는 작업)의 수.
    - 일간 능동 사용자 (Daily Active User, DAU) = 3억 * 50% = 1.5억
    - QPS = (1.5억 * 2트윗) / 24(시간) / 3600(초) = 약 3500
    - 최대 QPS(Peek QPS) = 2 x QPS = 약 7000
- 미디어 저장을 위한 저장소 요구량
    - 평균 트윗 크기
        - tweet_id에 64바이트
        - 텍스트에 140바이트
        - 미디어에 1MB
    - 미디어 저장소 요구량: 1.5억 x 2 x 10% x 1MB = 30TB/ 일
    - 5년간 미디어를 보관하기 위한 저장소 요구량: 30TB x 365 x 5 = 약 55PB

# 팁

계략적인 규모 추정과 관련된 면접에서 중요한 것은 결과를 내는 것보다 올바른 절차를 밟는 것이다.

- 근사치를 활용한 계산(rounding and approximation)
- 가정(assumption)들은 적어두라. 나중에 살펴볼 수 있도록
- 단위를 붙여라. 5KB인지, 5MB인지
- 많이 출제되는 개략적 추정 문제는 QPS, 최대 QPS, 저장소 요구량, 캐시 요구량, 서버 수 등을 추정하는 것이다.